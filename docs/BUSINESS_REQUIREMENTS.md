# Бизнес-требования ReportIB

> Версия: 2.0  
> Последнее обновление: 2026-02-11  
> Статус: актуально

## 1. Назначение

ReportIB — внутренняя система планирования и контроля выполнения работ
подразделения информационной безопасности.

Ключевые цели:

- управление годовыми, квартальными и месячными планами
- фиксация ежедневного выполнения задач
- формирование отчетности и мониторинг KPI
- ролевое управление доступом и согласованием

## 2. Роли

- `chief`: утверждает планы, видит все подразделения
- `head`: создает и ведет планы своего подразделения, контролирует исполнение
- `employee`: выполняет назначенные работы и ведет ежедневные задачи

## 3. Доменная модель

Иерархия планирования:

1. годовой план
2. квартальный план
3. месячный план
4. ежедневная задача

Дополнительные сущности:

- департаменты
- процессы
- услуги
- мероприятия/показатели (measures)
- компании
- проекты (тегирование задач между департаментами)

## 4. Функциональные требования

### FR-01 Жизненный цикл планов

- создание/редактирование/удаление годовых, квартальных и месячных планов
- поддержка допустимых родительских связей
- ролевой контроль переходов статусов

### FR-02 Согласование

- `head` отправляет план на согласование
- `chief` утверждает или возвращает на доработку с комментарием
- переходы статусов аудируются

### FR-03 Исполнение задач

- `employee` создает ежедневные задачи в разрешенном контексте
- задача содержит дату, описание, часы, опционально вложение и проект
- ограничения по трудозатратам проверяются бизнес-правилами

### FR-04 Ведение справочников

- управление сотрудниками, компаниями, показателями и проектами
- для CRUD использовать стандарт двухпанельного интерфейса

### FR-05 Отчетность

- генерация операционных отчетов на основе текущих планов и задач
- контроль прав доступа в отчетных API

### FR-06 KPI

- отображение KPI для авторизованных ролей
- фильтрация по периоду и объектам

## 5. Нефункциональные требования

### NFR-01 Безопасность

- аутентификация через Microsoft 365 (Azure AD)
- авторизация по ролям и области департамента
- использование RLS и безопасных объектов БД в Supabase

### NFR-02 Надежность

- стабильная работа в ежедневной эксплуатации
- предсказуемая обработка ошибок и логирование

### NFR-03 Производительность

- интерфейс дашборда должен оставаться отзывчивым при штатной нагрузке
- исключать лишние запросы к БД в горячих пользовательских сценариях

### NFR-04 Поддерживаемость

- код и документация должны отражать текущую monthly-модель (без weekly)
- доменные операции централизовать в сервисном/модульном слое

## 6. Исключенная устаревшая область

Weekly-модель удалена и не входит в текущий контур:

- weekly-таблицы, weekly-представления и weekly-функции
- weekly-сценарии в UI и отчетах

Миграция-источник:

- `supabase/migrations/20260209_remove_legacy_weekly_planning.sql`

## 7. Связанные документы

- `docs/DEVELOPER_GUIDE.md`
- `docs/database/SCHEMA.md`
- `docs/database/TABLES_USAGE.md`
- `docs/modules/auth/authentication.md`
- `docs/modules/projects/README.md`




